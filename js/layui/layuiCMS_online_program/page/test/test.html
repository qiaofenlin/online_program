<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<link rel="stylesheet" href="../../layui/css/layui.css" media="all"/>
<script type="text/javascript" src="../../layui/layui.js"></script>
<table class="layui-hide" id="test" lay-filter="table"></table>

<script>
    layui.use(['form', 'layer', 'table'], function () {
        var table = layui.table
            , form = layui.form, $ = layui.$;

        console.log();
        table.render({
            elem: '#test'  //绑定table id
            // ,url:'http://127.0.0.1:8888/callin/account/history/session/',
            ,
            url: 'http://127.0.0.1:8888/callin/account/host/list/',
            method: 'post',
            headers: {Authorization: 'Token Y2FsbGluMTIzNDU2OjAzMTQ1NjJkNDA2YmRiNmFhNDlhZGNlZjAwY2U2NzUxYTM5NmFmMDU='},
            contentType: 'application/json',
            // response: {
            //     statusName: res //规定数据状态的字段名称，默认：code
            //     ,statusCode: 0 //规定成功的状态码，默认：0
            //     ,msgName: 'hint' //规定状态信息的字段名称，默认：msg
            //     ,countName: 'total' //规定数据总数的字段名称，默认：count
            //     ,dataName: 'data' //规定数据列表的字段名称，默认：data
            // }
            parseData: function (res) { //res 即为原始返回的数据
                console.log(res.data);

                return {
                    "code": res.status, //解析接口状态
                    "msg": res.message, //解析提示文本
                    "count": res.total, //解析数据长度
                    "data": res.data //解析数据列表
                };
            }
            ,
            cellMinWidth: 80
            ,
            cols: [[
                  {type: 'numbers'}
                , {field: 'line_id', title: '线路id'}
                , {field: 'line_name', title: '线路名称', width: 150}
                , {field: 'flow_name', title: '菜单路径'}
                , {field: 'service_number', title: '菜单权限'}
                , {field: 'expire_at', title: '类型'}
                , {field: 'interrupt', title: '图标'}
                , {field: 'name', title: '排序'}
                // , {fixed: 'is_transfer', title: '操作', align: 'center', toolbar: '#toolBar'}//一个工具栏  具体请查看layui官网
            ]]
            ,
            page: true   //开启分页
            ,limit:10   //默认十条数据一页
            ,limits:[10,20,30,50]  //数据分页条
            ,
            id: 'testReload'
            ,
            where: {
                "data": {"user_id": "n_ut_2019_02_19_92"},
                "token": "Y2FsbGluMTIzNDU2OjAzMTQ1NjJkNDA2YmRiNmFhNDlhZGNlZjAwY2U2NzUxYTM5NmFmMDU="
            }

            // ,done: function(res, curr, count){
            //     //如果是异步请求数据方式，res即为你接口返回的信息。
            //     //如果是直接赋值的方式，res即为：{data: [], count: 99} data为当前页数据、count为数据总长度
            //
            //     console.log("*************************");
            //     console.log(res.data);
            //     console.log("*************************");
            //
            //     //得到当前页码
            //     console.log(curr);
            //
            //     //得到数据总量
            //     console.log(count);
            // }
        });

    });
</script>

</body>
</html>

